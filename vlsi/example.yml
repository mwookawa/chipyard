# Technology
vlsi.core.technology_path: ["hammer-intech22-plugin"]
vlsi.core.technology_path_meta: append
vlsi.core.max_threads: 8
# General inputs
vlsi.inputs.supplies.power: [{name: "VDD", pin: "VDD"}]
vlsi.inputs.supplies.VDD: "1.05 V"
vlsi.inputs.power_spec_mode: auto
vlsi.inputs.power_spec_type: cpf
vlsi.inputs.mmmc_corners: [
    {name: "psss_0.900v_125c", type: "setup", voltage: "0.90 V", temp: "125 C"},
    {name: "pfff_1.050v_-40c", type: "hold", voltage: "1.05 V", temp: "-40 C"}
]
vlsi.inputs.clocks: [
  # slow clock
  {name: "digital_single_clk", path: "BeagleChipTop/single_clks_0", period: "2ns", uncertainty: ".2ns"},
  # fast clock
  {name: "digital_diff_clk", path: "BeagleChipTop/DIFFAMP_SELFBIASED/out", period: "1ns", uncertainty: ".1ns"},
  # output of the clock muxes
  # uncore
  {name: "uncore_clk", path: "BeagleChipTop/sys/ClockMutexMux_3/io_clockOut", period: "2ns", uncertainty: ".2ns"},
  # boom + hwacha tile
  {name: "bh_clk", path: "BeagleChipTop/sys/ClockMutexMux_4/io_clockOut", period: "1ns", uncertainty: ".1ns"},
  # rocket + systolic tile
  {name: "rs_clk", path: "BeagleChipTop/sys/ClockMutexMux_5/io_clockOut", period: "2ns", uncertainty: ".2ns"},
  # # hbwif in (ref)
  {name: "hbwif_ref0_clk", path: "BeagleChipTop/DIFFAMP_SELFBIASED_1/out", period: "1.142ns", uncertainty: ".1142ns"},
  {name: "hbwif_ref1_clk", path: "BeagleChipTop/DIFFAMP_SELFBIASED_2/out", period: "1.142ns", uncertainty: ".1142ns"},
  # hbwif out (within each lane)
  {name: "hbwif_lane0_rx_clk_out", path: "pin:BeagleChipTop/hbwif_/laneModules_0/txrxss/txrx/clock_rx_div", period: "1.142ns", uncertainty: ".1142ns"},
  {name: "hbwif_lane0_tx_clk_out", path: "pin:BeagleChipTop/hbwif_/laneModules_0/txrxss/txrx/clock_tx_div", period: "1.142ns", uncertainty: ".1142ns"},
  {name: "hbwif_lane1_rx_clk_out", path: "pin:BeagleChipTop/hbwif_/laneModules_1/txrxss/txrx/clock_rx_div", period: "1.142ns", uncertainty: ".1142ns"},
  {name: "hbwif_lane1_tx_clk_out", path: "pin:BeagleChipTop/hbwif_/laneModules_1/txrxss/txrx/clock_tx_div", period: "1.142ns", uncertainty: ".1142ns"}
]
par.blockage_spacing: 2.0
par.power_straps_mode: generate
par.generate_power_straps_method: by_tracks
par.generate_power_straps_options:
    by_tracks:
        strap_layers:
            - m2
            - m3
            - m4
            - m5
            - m6
            - m7
            - m8
        track_width: 6
        track_width_m6: 10
        track_spacing: 0
        power_utilization: 0.05
        power_utilization_m7: 1.0
        power_utilization_m8: 1.0
vlsi.inputs.placement_constraints:
    - path: "BoomRocketTop"
      type: "toplevel"
      x: 0
      y: 0
      width: 2000.0
      height: 2000.0
      margins:
        left: 0
        right: 0
        top: 0
        bottom: 0
# SRAM Compiler options
vlsi.core.sram_generator_tool: "sram_compiler"
vlsi.core.sram_generator_tool_path: ["hammer-intech22-plugin"]
vlsi.core.sram_generator_tool_path_meta: "append"
# Build System options
vlsi.core.build_system: "make"
# Genus options
vlsi.core.synthesis_tool: "genus"
vlsi.core.synthesis_tool_path: ["hammer-cad-plugins/synthesis"]
vlsi.core.synthesis_tool_path_meta: "append"
synthesis.genus.version: "181"
# Innovus options
vlsi.core.par_tool: "innovus"
vlsi.core.par_tool_path: ["hammer-cad-plugins/par"]
vlsi.core.par_tool_path_meta: "append"
par.innovus.version: "181"
par.innovus.design_flow_effort: "standard"
par.inputs.gds_merge: true
# Calibre options
# TODO there are no Calibre decks here
# Submit command (use LSF)
vlsi.submit:
    command: "lsf"
    settings: [{"lsf": {
        "bsub_binary": "/tools/support/lsf/9.1/linux2.6-glibc2.3-x86_64/bin/bsub",
        "num_cpus": 8,
        "queue": "bora",
        "extra_args": ["-R", "span[hosts=1]"]
        }
    }]
    settings_meta: "append"
